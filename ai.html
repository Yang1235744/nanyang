<!DOCTYPE html>
<html lang="zh-CN">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>å—é˜³æ•°ç æ™ºèƒ½AI Â· æ‹ç…§ä¿®ç”µè„‘ç‰ˆ</title>
<style>
*{margin:0;padding:0;box-sizing:border-box;font-family:"Microsoft YaHei",sans-serif;}
body{
  background:url(https://picsum.photos/id/1036/1920/1080) no-repeat center center fixed;
  background-size:cover;position:relative;min-height:100vh;color:#fff;
}
body::before{
  content:"";position:fixed;top:0;left:0;width:100%;height:100%;
  background:rgba(0,0,0,0.7);z-index:-1;
}
.nav{position:fixed;top:0;left:0;width:100%;padding:15px 30px;background:rgba(0,0,0,0.9);display:flex;justify-content:space-between;align-items:center;z-index:999;}
.nav .logo{font-size:22px;font-weight:bold;color:#00bcd4;}
.nav .menu a{color:#ccc;text-decoration:none;margin-left:25px;font-size:16px;}
.nav .menu a:hover{color:#00bcd4;}

.chat-container{width:100%;max-width:900px;margin:90px auto 0;padding:20px;display:flex;flex-direction:column;height:calc(100vh - 90px);}
.chat-messages{flex:1;overflow-y:auto;margin-bottom:20px;padding-right:10px;}
.message{margin-bottom:15px;display:flex;}
.message.user{justify-content:flex-end;}
.message.ai{justify-content:flex-start;}
.message-content{max-width:75%;padding:12px 18px;border-radius:18px;line-height:1.6;}
.message.user .message-content{background:#007bff;border-bottom-right-radius:4px;}
.message.ai .message-content{background:#1a1a1a;border:1px solid #333;border-bottom-left-radius:4px;}

.input-area{display:flex;gap:10px;align-items:center;}
#user-input{flex:1;padding:14px 20px;border-radius:25px;border:none;background:rgba(255,255,255,0.1);color:#fff;font-size:16px;outline:none;}
#send-btn{padding:14px 24px;border-radius:25px;border:none;background:#00bcd4;color:#fff;font-weight:bold;cursor:pointer;}
#deepseek-btn{padding:10px 16px;border-radius:20px;border:none;background:#666;color:#fff;font-weight:bold;cursor:pointer;transition:0.3s;}
#deepseek-btn.active{background:#007bff;}
#camera-btn{display:none;padding:14px;border-radius:50%;border:none;background:#00bcd4;color:#fff;width:50px;height:50px;cursor:pointer;}
#camera-preview{display:none;max-width:200px;margin:10px auto;border-radius:10px;}

.typing-indicator{display:none;padding:12px 18px;background:#1a1a1a;border-radius:18px;}
.typing-indicator span{display:inline-block;width:8px;height:8px;border-radius:50%;background:#00bcd4;margin:0 2px;animation:typing 1.4s infinite;}
.typing-indicator span:nth-child(2){animation-delay:0.2s;}
.typing-indicator span:nth-child(3){animation-delay:0.4s;}
@keyframes typing{0%,60%,100%{transform:translateY(0);opacity:0.7;}30%{transform:translateY(-6px);opacity:1;}}
</style>
</head>
<body>
<div class="nav">
  <div class="logo">å—é˜³æ•°ç å·¥ä½œå®¤</div>
  <div class="menu">
    <a href="index.html">é¦–é¡µ</a>
    <a href="about.html">å…³äºæˆ‘ä»¬</a>
    <a href="ai.html">AIåŠ©æ‰‹</a>
  </div>
</div>

<div class="chat-container">
  <div class="chat-messages" id="chat-messages">
    <div class="message ai">
      <div class="message-content">ä½ å¥½å‘€ï½æˆ‘æ˜¯ä½ çš„ä¸“å±æ™ºèƒ½AIï¼Œæœ‰ä»€ä¹ˆæƒ³é—®çš„ã€æƒ³è¯´çš„ï¼Œéƒ½å¯ä»¥å‘Šè¯‰æˆ‘å“¦ï¼</div>
    </div>
  </div>
  <div class="typing-indicator" id="typing-indicator"><span></span><span></span><span></span></div>
  <img id="camera-preview">
  <div class="input-area">
    <input type="text" id="user-input" placeholder="éšä¾¿é—®ï¼Œéšä¾¿èŠï½" autocomplete="off">
    <button id="deepseek-btn" title="å¼€å¯æ·±åº¦æ€è€ƒ">DeepSeek</button>
    <button id="send-btn">å‘é€</button>
    <button id="camera-btn">ğŸ“·</button>
  </div>
</div>

<script>
// ===================== è®¾å¤‡æ£€æµ‹ï¼šæ‰‹æœº/ç”µè„‘ =====================
const isMobile = /Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent);
const cameraBtn = document.getElementById('camera-btn');

// åªæœ‰æ‰‹æœº + æµè§ˆå™¨æ”¯æŒæ‘„åƒå¤´æ—¶ï¼Œæ‰æ˜¾ç¤ºæ‹ç…§æŒ‰é’®
if (isMobile && navigator.mediaDevices && navigator.mediaDevices.getUserMedia) {
  cameraBtn.style.display = 'block';
} else {
  cameraBtn.style.display = 'none';
}

// ===================== æ·±åº¦æ€è€ƒå¼€å…³ =====================
let deepseekMode = false;
const deepseekBtn = document.getElementById('deepseek-btn');
deepseekBtn.addEventListener('click', () => {
  deepseekMode = !deepseekMode;
  deepseekBtn.classList.toggle('active', deepseekMode);
  deepseekBtn.textContent = deepseekMode ? 'DeepSeek ON' : 'DeepSeek';
});

// ===================== AI æ ¸å¿ƒé€»è¾‘ =====================
const DOWNLOAD_URL = "å—æ´‹æ•°ç å·¥ä½œå®¤å®˜ç½‘æä¾›çº¯å‡€ç³»ç»Ÿã€PEã€é©±åŠ¨ä¸å·¥å…·";

const knowledge = {
  "è£…æœº": ["è£…æœºè¦æ³¨æ„CPUä¸»æ¿å…¼å®¹ï¼Œå†…å­˜æ’ç´§ï¼Œæ•£çƒ­å™¨æ¶‚ç¡…è„‚ï¼Œä¾›ç”µæ’æ»¡ã€‚", "çº¯å‡€è£…æœºèµ„æºéƒ½å¯ä»¥åœ¨å®˜ç½‘ä¸‹è½½åº“æ‰¾åˆ°ã€‚"],
  "è£…ç³»ç»Ÿ": ["ç”¨8Gä»¥ä¸ŠUç›˜åˆ¶ä½œå¯åŠ¨ç›˜ï¼Œæ–°ç”µè„‘å»ºè®®UEFI+GPTï¼Œå®‰è£…çº¯å‡€ç‰ˆç³»ç»Ÿã€‚", `å®˜ç½‘æä¾›å®‰å…¨çº¯å‡€çš„ç³»ç»Ÿé•œåƒï¼š${DOWNLOAD_URL}`],
  "é©±åŠ¨": ["é©±åŠ¨å¼‚å¸¸ä¼šå¯¼è‡´æ²¡å£°éŸ³ã€æ²¡ç½‘ã€è“å±ã€èŠ±å±ï¼Œä¼˜å…ˆè£…å®˜æ–¹é©±åŠ¨ã€‚", "ä¸‡èƒ½ç½‘å¡é©±åŠ¨ä¸å…¨å¥—é©±åŠ¨å¯åœ¨å®˜ç½‘è·å–ã€‚"],
  "è“å±": ["è“å±å¤šæ˜¯é©±åŠ¨å†²çªã€å†…å­˜ä¸ç¨³ã€ç¡¬ç›˜åé“æˆ–æ¸©åº¦è¿‡é«˜ï¼Œè£…çº¯å‡€ç³»ç»Ÿä¼šç¨³å®šå¾ˆå¤šã€‚"],
  "å¡é¡¿": ["ç”µè„‘å¡ä¼˜å…ˆæ¢å›ºæ€ã€æ¸…ç†Cç›˜ã€å…³é—­å¼€æœºè‡ªå¯ï¼Œä½¿ç”¨çº¯å‡€ç³»ç»Ÿæœ€æµç•…ã€‚"],
  "ç½‘ç»œ": ["ä¸Šä¸äº†ç½‘å…ˆæŸ¥é©±åŠ¨ã€ç½‘çº¿ã€è·¯ç”±å™¨ï¼ŒDNSå¯ä»¥è®¾ä¸º223.5.5.5ã€‚"],
  "é»‘å±": ["é»‘å±å…ˆé‡æ’å†…å­˜ï¼Œç‹¬ç«‹æ˜¾å¡è¦æ¥æ˜¾å¡æ¥å£ï¼Œä¸è¦æ¥ä¸»æ¿æ¥å£ã€‚"],
  "æ²¡å£°éŸ³": ["æ²¡å£°éŸ³å…ˆæ£€æŸ¥éŸ³é‡ä¸é©±åŠ¨ï¼Œå°å¼æœºå‰é¢æ¿éœ€åœ¨éŸ³é¢‘ç®¡ç†å™¨ç¦ç”¨å‰ç½®é¢æ¿æ£€æµ‹ã€‚"],
  "å¯†ç ": ["å¿˜è®°å¯†ç å¯ä»¥ç”¨PEå·¥å…·ç®±æ¸…é™¤ï¼Œä¸åˆ é™¤æ–‡ä»¶ï¼Œå®‰å…¨æ–¹ä¾¿ã€‚"]
};

const comfort = [
  "æ²¡äº‹çš„ï¼Œæˆ‘ä¸€ç›´éƒ½åœ¨å‘¢ã€‚",
  "åˆ«ä¸å¼€å¿ƒå•¦ï¼Œæˆ‘é™ªç€ä½ ã€‚",
  "ä¸€åˆ‡éƒ½ä¼šæ…¢æ…¢å¥½èµ·æ¥çš„ï¼Œä½ è¶…æ£’çš„ã€‚",
  "æœ‰æˆ‘åœ¨ï¼Œä¸ç”¨æ€•ï¼Œä¹Ÿä¸ç”¨éš¾è¿‡ã€‚",
  "æˆ‘ä¼šä¸€ç›´å¬ä½ è¯´è¯ï¼Œæ°¸è¿œä¸ç¦»å¼€ã€‚",
  "ä½ å·²ç»å¾ˆåŠªåŠ›å•¦ï¼ŒçœŸçš„ã€‚",
  "æ”¾æ¾ä¸€ç‚¹ï¼Œæˆ‘åœ¨è¿™é‡Œé™ªä½ ã€‚"
];

const happy = [
  "å¼€å¿ƒä¸€ç‚¹å˜›ï½ç”Ÿæ´»è¶…å¯çˆ±çš„ï¼",
  "ç¬‘ä¸€ç¬‘å‘€ï¼Œä½ ç¬‘èµ·æ¥è‚¯å®šè¶…å¥½çœ‹ã€‚",
  "æ¥ï¼Œæˆ‘ç»™ä½ åŠ åŠ æ²¹ï¼å†²å†²å†²ï¼",
  "å¿ƒæƒ…å¥½ä¸€ç‚¹å•¦ï¼Œæœ‰æˆ‘é™ªä½ èŠå¤©ï½",
  "ä¸ç®¡å‘ç”Ÿä»€ä¹ˆï¼Œæˆ‘éƒ½ç«™ä½ è¿™è¾¹ï¼"
];

const greet = [
  "ä½ å¥½å‘€ï¼æˆ‘åœ¨å‘¢ï½",
  "å“ˆå–½ï¼æ‰¾æˆ‘æœ‰äº‹å—ï¼Ÿ",
  "æˆ‘ä¸€ç›´éƒ½åœ¨ï¼Œä½ è¯´å§ã€‚",
  "ä½ å¥½å‘€ï¼Œæœ‰ä»€ä¹ˆæˆ‘èƒ½å¸®ä½ çš„ï¼Ÿ"
];

const keywords = {
  "è£…æœº": ["è£…æœº","ç»„è£…","è£…ç”µè„‘"],
  "è£…ç³»ç»Ÿ": ["è£…ç³»ç»Ÿ","é‡è£…","é•œåƒ"],
  "é©±åŠ¨": ["é©±åŠ¨","æ˜¾å¡é©±åŠ¨","å£°å¡é©±åŠ¨","ç½‘å¡é©±åŠ¨"],
  "è“å±": ["è“å±","å´©æºƒ"],
  "å¡é¡¿": ["å¡","å¡é¡¿","æ…¢"],
  "ç½‘ç»œ": ["ç½‘","ä¸Šç½‘","wifi","ç½‘çº¿"],
  "é»‘å±": ["é»‘å±","æ²¡ä¿¡å·"],
  "æ²¡å£°éŸ³": ["å£°éŸ³","æ²¡å£°éŸ³"],
  "å¯†ç ": ["å¯†ç ","å¿˜è®°å¯†ç "]
};

function isSad(msg) {
  const s = ["éš¾è¿‡","ä¸å¼€å¿ƒ","çƒ¦","ç´¯","å“­","éš¾å—","ç³Ÿç³•","å¤±æœ›","ä¼¤å¿ƒ","ç–²æƒ«"];
  return s.some(i => msg.includes(i));
}
function isHappy(msg) {
  const h = ["å¼€å¿ƒ","é«˜å…´","å¿«ä¹","æ£’","å¥½è€¶","èˆ’æœ","é¡ºåˆ©"];
  return h.some(i => msg.includes(i));
}

function getReply(msg) {
  msg = msg.trim().toLowerCase();
  if(isSad(msg)) return comfort[Math.floor(Math.random()*comfort.length)];
  if(isHappy(msg)) return happy[Math.floor(Math.random()*happy.length)];
  if(["ä½ å¥½","åœ¨å—","å“ˆå–½","å—¨"].some(i=>msg.includes(i))) return greet[Math.floor(Math.random()*greet.length)];
  for(let k in keywords) {
    if(keywords[k].some(w=>msg.includes(w))) {
      const list = knowledge[k];
      return list[Math.floor(Math.random()*list.length)];
    }
  }
  const normal = [
    "æˆ‘åœ¨å‘¢ï¼Œä½ ç»§ç»­è¯´ã€‚",
    "è¿™ä¸ªæˆ‘å¬æ‡‚å•¦ï¼Œä½ æƒ³è®©æˆ‘æ€ä¹ˆå¸®ä½ ï¼Ÿ",
    "æˆ‘æ˜ç™½ä½ çš„æ„æ€ï½",
    "ä½ å¯ä»¥æ…¢æ…¢è¯´ï¼Œæˆ‘è®¤çœŸå¬ã€‚",
    "æˆ‘éšæ—¶éƒ½åœ¨ï¼Œæ”¾å¿ƒè·Ÿæˆ‘è¯´å°±å¥½ã€‚",
    "ä¸ç®¡ä»€ä¹ˆé—®é¢˜ï¼Œæˆ‘éƒ½å°½åŠ›å¸®ä½ ã€‚"
  ];
  return normal[Math.floor(Math.random()*normal.length)];
}

// ===================== æ‹ç…§è§£æï¼ˆæ‰‹æœºç‰ˆï¼‰ =====================
const cameraPreview = document.getElementById('camera-preview');
cameraBtn.addEventListener('click', async () => {
  try {
    const stream = await navigator.mediaDevices.getUserMedia({ video: { facingMode: 'environment' } });
    const video = document.createElement('video');
    video.srcObject = stream;
    video.play();
    const canvas = document.createElement('canvas');
    canvas.width = 640;
    canvas.height = 480;
    const ctx = canvas.getContext('2d');
    setTimeout(() => {
      ctx.drawImage(video, 0, 0, canvas.width, canvas.height);
      const dataUrl = canvas.toDataURL('image/jpeg');
      cameraPreview.src = dataUrl;
      cameraPreview.style.display = 'block';
      stream.getTracks().forEach(track => track.stop());
      addMsg("æˆ‘çœ‹åˆ°ä½ æ‹çš„ç”µè„‘äº†ï¼æ­£åœ¨å¸®ä½ åˆ†ææ•…éšœ...", false);
      setTimeout(() => {
        addMsg("æ ¹æ®å›¾ç‰‡åˆ†æï¼šè¿™å¤§æ¦‚ç‡æ˜¯é©±åŠ¨æˆ–å†…å­˜é—®é¢˜ã€‚å»ºè®®ï¼š1. é‡æ’å†…å­˜ï¼›2. é‡è£…å®˜æ–¹é©±åŠ¨ï¼›3. å®‰è£…çº¯å‡€ç³»ç»Ÿã€‚", false);
        cameraPreview.style.display = 'none';
      }, 1500);
    }, 1000);
  } catch (err) {
    addMsg("æ— æ³•è®¿é—®æ‘„åƒå¤´ï¼Œè¯·æ£€æŸ¥æƒé™æˆ–è®¾å¤‡ã€‚", false);
  }
});

// ===================== èŠå¤©ç•Œé¢ =====================
const chat = document.getElementById('chat-messages');
const input = document.getElementById('user-input');
const sendBtn = document.getElementById('send-btn');
const typing = document.getElementById('typing-indicator');

function addMsg(text, isUser) {
  const div = document.createElement('div');
  div.className = `message ${isUser ? 'user' : 'ai'}`;
  const c = document.createElement('div');
  c.className = 'message-content';
  c.innerText = text;
  div.appendChild(c);
  chat.appendChild(div);
  chat.scrollTop = chat.scrollHeight;
}

function send() {
  const t = input.value.trim();
  if(!t) return;
  addMsg(t, true);
  input.value = '';
  typing.style.display = 'block';
  setTimeout(() => {
    let r = getReply(t);
    if (deepseekMode) {
      r = "ã€æ·±åº¦æ€è€ƒæ¨¡å¼ã€‘\n" + r + "\n\næˆ‘å·²ç»ç”¨æ›´æ·±å…¥çš„æ–¹å¼åˆ†æäº†ä½ çš„é—®é¢˜ï¼Œç¡®ä¿å›ç­”æ›´ç²¾å‡†ã€æ›´å…¨é¢ã€‚";
    }
    typing.style.display = 'none';
    addMsg(r, false);
  }, 700);
}

sendBtn.onclick = send;
input.onkeypress = e => e.key === 'Enter' && send();
</script>
</body>
</html>
